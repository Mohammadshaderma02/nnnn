# Postpaid eKYC Video Recording Flow Diagram

## Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER STARTS POSTPAID GSM FLOW                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ“± GSM_JordainianCustomerInformation Screen            â”‚
â”‚                                                                       â”‚
â”‚  User fills in:                                                       â”‚
â”‚  â€¢ National Number                                                    â”‚
â”‚  â€¢ MSISDN (Phone Number)                                             â”‚
â”‚  â€¢ Reference Number                                                   â”‚
â”‚  â€¢ SIM Card                                                          â”‚
â”‚  â€¢ Document Expiry Date                                              â”‚
â”‚  â€¢ Military Number (if applicable)                                   â”‚
â”‚  â€¢ Commitment selection                                              â”‚
â”‚  â€¢ Upload ID images (front/back)                                     â”‚
â”‚                                                                       â”‚
â”‚  [User clicks "Next" button]                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ”„ VALIDATION & PRICE API                       â”‚
â”‚                                                                       â”‚
â”‚  Function: Update_Price() â†’ retrieve_updated_price_API()            â”‚
â”‚                                                                       â”‚
â”‚  API Call: POST /Postpaid/preSubmitValidation                       â”‚
â”‚  Body: {                                                             â”‚
â”‚    "MarketType": "GSM",                                              â”‚
â”‚    "IsJordanian": true,                                              â”‚
â”‚    "NationalNo": "...",                                              â”‚
â”‚    "PackageCode": "...",                                             â”‚
â”‚    "Msisdn": "...",                                                  â”‚
â”‚    "isClaimed": false                                                â”‚
â”‚  }                                                                   â”‚
â”‚                                                                       â”‚
â”‚  Response: { "status": 0, "data": { "price": "25.00" } }            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
             âœ… Success                      âŒ Error
                    â”‚                               â”‚
                    â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    _navigateToVideoRecording()  â”‚   â”‚   Show Error Toast       â”‚
â”‚                                  â”‚   â”‚   User stays on screen   â”‚
â”‚  1. Get available cameras        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  2. Get sessionUid from          â”‚
â”‚     globalVars                   â”‚
â”‚  3. Get ekycToken from           â”‚
â”‚     globalVars                   â”‚
â”‚  4. Navigate to video screen     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ¥ PostpaidIdentificationSelfRecording Screen              â”‚
â”‚          (lib/Views/.../PostPaid/PostpaidIdentificationSelfRecording.dart) â”‚
â”‚                                                                       â”‚
â”‚  Parameters:                                                          â”‚
â”‚  â€¢ cameras: [frontCamera, backCamera]                                â”‚
â”‚  â€¢ sessionUid: "ekyc-session-12345"                                  â”‚
â”‚  â€¢ ekycToken: "Bearer eyJ..."                                        â”‚
â”‚  â€¢ onVideoRecorded: (videoPath, videoHash) => {...}                 â”‚
â”‚                                                                       â”‚
â”‚  Screen UI:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚  ğŸ“¹ eKYC Video Recording        â”‚                                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”‚
â”‚  â”‚                                 â”‚                                â”‚
â”‚  â”‚     [Camera Preview Area]       â”‚                                â”‚
â”‚  â”‚                                 â”‚                                â”‚
â”‚  â”‚  "Position your face in the     â”‚                                â”‚
â”‚  â”‚   camera and click Start"       â”‚                                â”‚
â”‚  â”‚                                 â”‚                                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”‚
â”‚  â”‚                                 â”‚                                â”‚
â”‚  â”‚   [Start Recording Button]      â”‚                                â”‚
â”‚  â”‚                                 â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                        [User clicks "Start Recording"]
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â±ï¸ 3-SECOND COUNTDOWN                           â”‚
â”‚                                                                       â”‚
â”‚                              3... 2... 1... GO!                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ğŸ”´ RECORDING IN PROGRESS                         â”‚
â”‚                                                                       â”‚
â”‚  Duration: 15 seconds max                                            â”‚
â”‚                                                                       â”‚
â”‚  Instructions shown sequentially (every 3-4 seconds):                â”‚
â”‚  1. "Blink your eyes" ğŸ‘ï¸                                             â”‚
â”‚  2. "Turn your head left" â¬…ï¸                                         â”‚
â”‚  3. "Turn your head right" â¡ï¸                                        â”‚
â”‚  4. "Smile" ğŸ˜Š                                                       â”‚
â”‚                                                                       â”‚
â”‚  UI shows:                                                           â”‚
â”‚  â€¢ Red REC indicator                                                 â”‚
â”‚  â€¢ Timer countdown                                                   â”‚
â”‚  â€¢ Current instruction text                                          â”‚
â”‚                                                                       â”‚
â”‚  [Recording auto-stops after 15 seconds]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ”’ VIDEO HASH CALCULATION                         â”‚
â”‚                                                                       â”‚
â”‚  1. Read video file bytes                                            â”‚
â”‚  2. Calculate SHA-256 hash                                           â”‚
â”‚  3. Generate fingerprint (first 16 chars of hash)                    â”‚
â”‚                                                                       â”‚
â”‚  Example:                                                            â”‚
â”‚  videoHash: "a1b2c3d4e5f6789012345678901234567890abcdef..."          â”‚
â”‚  fingerprint: "a1b2c3d4e5f67890"                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ“¤ UPLOAD VIDEO TO EKYC API                     â”‚
â”‚                                                                       â”‚
â”‚  API: POST /wid-zain/api/v1/session/{sessionUid}/selfie-video       â”‚
â”‚                                                                       â”‚
â”‚  Headers:                                                            â”‚
â”‚  â€¢ Authorization: Bearer {ekycToken}                                 â”‚
â”‚  â€¢ Content-Type: multipart/form-data                                â”‚
â”‚                                                                       â”‚
â”‚  Body:                                                               â”‚
â”‚  â€¢ video: [video file binary]                                        â”‚
â”‚  â€¢ filename: "selfie_video.mp4"                                      â”‚
â”‚                                                                       â”‚
â”‚  [Waiting for response...]                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
             âœ… Success (200/201)            âŒ Error
                    â”‚                               â”‚
                    â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  onVideoRecorded() Callback     â”‚   â”‚  Show Error Message      â”‚
â”‚  Fires!                          â”‚   â”‚  "Upload failed"         â”‚
â”‚                                  â”‚   â”‚                          â”‚
â”‚  Receives:                       â”‚   â”‚  Options:                â”‚
â”‚  â€¢ videoPath: "/path/to/video"   â”‚   â”‚  â€¢ [Retry]               â”‚
â”‚  â€¢ videoHash: "a1b2c3..."        â”‚   â”‚  â€¢ [Cancel]              â”‚
â”‚                                  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Actions:                        â”‚
â”‚  1. Print success log            â”‚
â”‚  2. Navigator.pop(context)       â”‚
â”‚     â†’ Close video screen         â”‚
â”‚  3. _showPriceConfirmation       â”‚
â”‚     Dialog()                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ğŸ’° PRICE CONFIRMATION DIALOG                        â”‚
â”‚                                                                       â”‚
â”‚  Arabic: "Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙƒÙ„ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù‡Ùˆ 25 Ø¯ÙŠÙ†Ø§Ø±ØŒ Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ"         â”‚
â”‚  English: "The total amount required is 25 JD, are you sure?"       â”‚
â”‚                                                                       â”‚
â”‚  Buttons:                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚  Close   â”‚  â”‚   Save   â”‚                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚        â”‚              â”‚                                              â”‚
â”‚        â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚        â”‚                             â”‚                               â”‚
â”‚        â–¼                             â–¼                               â”‚
â”‚  Cancel & Return        Proceed to Contract Generation              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                        [User clicks "Save"]
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ğŸ“ GENERATE CONTRACT (Existing Flow)                  â”‚
â”‚                                                                       â”‚
â”‚  Function: postpaidGenerateContractBloc.add(...)                    â”‚
â”‚                                                                       â”‚
â”‚  All customer data + video info sent to backend                     â”‚
â”‚  Contract PDF generated                                              â”‚
â”‚                                                                       â”‚
â”‚  [Loading...]                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ“‹ GSM_contract_details Screen                          â”‚
â”‚                                                                       â”‚
â”‚  Shows:                                                              â”‚
â”‚  â€¢ Contract PDF preview                                              â”‚
â”‚  â€¢ Customer information                                              â”‚
â”‚  â€¢ Package details                                                   â”‚
â”‚  â€¢ Price breakdown                                                   â”‚
â”‚  â€¢ Payment options                                                   â”‚
â”‚                                                                       â”‚
â”‚  [User reviews and signs contract]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                         âœ… PROCESS COMPLETE!
```

## Key Integration Points

### 1. Entry Point
```dart
// File: GSM_JordainianCustomerInformation.dart
// Line: ~846
void retrieve_updated_price_API() async {
    // ... API call code ...
    if (result["status"] == 0) {
        setState(() {
          General_price = result["data"]["price"].toString();
        });
        
        // ğŸ¥ NEW: Navigate to video recording
        _navigateToVideoRecording();
        
        // OLD: showAlertDialogSaveData(...) - REMOVED
    }
}
```

### 2. Navigation Method
```dart
// File: GSM_JordainianCustomerInformation.dart
// Line: ~862
void _navigateToVideoRecording() async {
    final cameras = await availableCameras();
    
    await Navigator.push(
        context,
        MaterialPageRoute(
            builder: (context) => PostpaidIdentificationSelfRecording(
                cameras: cameras,
                sessionUid: globalVars.sessionUid,
                ekycToken: globalVars.ekycTokenID,
                onVideoRecorded: (videoPath, videoHash) {
                    Navigator.pop(context);
                    _showPriceConfirmationDialog();
                },
            ),
        ),
    );
}
```

### 3. Shared Video Recording Screen
```dart
// File: PostpaidIdentificationSelfRecording.dart
class PostpaidIdentificationSelfRecording extends StatefulWidget {
    final Function(String videoPath, String videoHash) onVideoRecorded;
    final String sessionUid;
    final String ekycToken;
    final List<CameraDescription> cameras;
    
    // Handles all video recording logic
    // Calls onVideoRecorded() on success
}
```

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Global Vars     â”‚
â”‚                   â”‚
â”‚ â€¢ sessionUid      â”‚â”€â”€â”€â”
â”‚ â€¢ ekycTokenID     â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Video Recording     â”‚
              â”‚ Screen              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Uploads video
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ eKYC API            â”‚
              â”‚ (External)          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Returns success
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ onVideoRecorded     â”‚
              â”‚ Callback            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Price Confirmation  â”‚
              â”‚ Dialog              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Contract Generation â”‚
              â”‚ (Existing Flow)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling Flow

```
                    START
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Any Error Occurs?       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
     YES â”‚                          â”‚ NO
        â”‚                           â”‚
        â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        Continue Normal Flow
â”‚ Show Error Toast â”‚
â”‚ or Dialog        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error Types:     â”‚
â”‚                  â”‚
â”‚ 1. Camera        â”‚â”€â”€â”€â–º Show: "Camera permission denied"
â”‚    Permission    â”‚      Action: Request permission again
â”‚                  â”‚
â”‚ 2. No Camera     â”‚â”€â”€â”€â–º Show: "No camera available"
â”‚    Available     â”‚      Action: Close screen
â”‚                  â”‚
â”‚ 3. Recording     â”‚â”€â”€â”€â–º Show: "Failed to record video"
â”‚    Failed        â”‚      Action: [Retry] button
â”‚                  â”‚
â”‚ 4. Upload        â”‚â”€â”€â”€â–º Show: "Failed to upload video"
â”‚    Failed        â”‚      Action: [Retry] [Cancel]
â”‚                  â”‚
â”‚ 5. API Error     â”‚â”€â”€â”€â–º Show error message from API
â”‚                  â”‚      Action: [Close]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Note:** This flow is designed to be reusable across all postpaid flows (GSM, FTTH, etc.) by simply providing different callbacks in the `onVideoRecorded` parameter.
